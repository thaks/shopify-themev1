{% liquid
  assign posts = section.blocks

  if template contains 'blog' and section.blocks == empty
    assign posts = blog.articles
  endif
%}

{% render 'blog-post-grid',
  posts: posts,
  subheading: section.settings.subheading,
  heading: section.settings.heading,
  content: section.settings.content,
  link_text: section.settings.link_text,
  link_url: section.settings.link_url,
  link_style: section.settings.link_style
%}

{% schema %}
{
  "name": "Blog Post Grid",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading"
    },
    {
      "type": "richtext",
      "id": "content",
      "label": "Content"
    },
    {
      "type": "text",
      "id": "link_text",
      "label": "Link Text"
    },
    {
      "type": "url",
      "id": "link_url",
      "label": "Link URL"
    },
    {
      "type": "select",
      "id": "link_style",
      "label": "Link Style",
      "default": "dark",
      "options": [
        {
          "value": "light",
          "label": "Light"
        },
        {
          "value": "dark",
          "label": "Dark"
        },
        {
          "value": "alt",
          "label": "Alternate"
        }
      ]
    }
  ],
  "blocks": [
    {
      "type": "article",
      "name": "Blog Post",
      "settings": [
        {
          "label": "Blog Post",
          "id": "article",
          "type": "article"
        }
      ]
    }
  ],
  "max_blocks": 3
}
{% endschema %}
